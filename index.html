<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forbidden Desires - Full Novel</title>
    <!-- ‚úÖ SDK PayPal REAL - Use SEU Client ID -->
    <script src="https://www.paypal.com/sdk/js?client-id=AWt1AnhU_rbAH8M56q6CUCfdCBQSNizvJyAt1dJ_5UmQYoQct5r_CIkkNXRH-fRLIOOFebcM5H9FK_Ym&currency=USD"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e94560;
            --primary-dark: #c23350;
            --secondary: #1a1a2e;
            --accent: #ff6b95;
            --text: #2d3748;
            --text-light: #718096;
            --light: #f8f9fa;
            --success: #48bb78;
            --warning: #ed8936;
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark Mode Variables */
        .dark-mode {
            --primary: #e94560;
            --primary-dark: #c23350;
            --secondary: #0f0f1a;
            --accent: #ff6b95;
            --text: #e2e8f0;
            --text-light: #a0aec0;
            --light: #1a202c;
            --success: #68d391;
            --warning: #f6ad55;
            --bg-gradient: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            background: var(--bg-gradient);
            color: var(--text);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100dvh;
            padding: 0;
            transition: var(--transition);
        }

        /* Header Styles */
        .app-header {
            background: var(--secondary);
            color: white;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .logo i {
            color: var(--accent);
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .icon-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Main Container */
        .app-container {
            display: flex;
            flex: 1;
            height: calc(100dvh - 64px);
            overflow: hidden;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: var(--light);
            border-right: 1px solid #2d3748;
            overflow-y: auto;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 90;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid #2d3748;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-title {
            font-weight: 600;
            color: var(--text);
        }

        .chapter-list {
            list-style: none;
            padding: 0.5rem 0;
        }

        .chapter-item {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #2d3748;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            position: relative;
            color: var(--text);
        }

        .chapter-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .chapter-item.active {
            background: rgba(233, 69, 96, 0.1);
            border-left: 4px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .chapter-item.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .chapter-number {
            background: #2d3748;
            color: var(--text-light);
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .chapter-item.active .chapter-number {
            background: var(--primary);
            color: white;
        }

        .chapter-item.locked .chapter-number {
            background: #2d3748;
            color: var(--text-light);
        }

        .chapter-name {
            flex: 1;
        }

        .chapter-duration {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .lock-icon {
            color: var(--warning);
            font-size: 0.9rem;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--light);
        }

        .reader-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #2d3748;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--light);
        }

        .chapter-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
        }

        .reader-actions {
            display: flex;
            gap: 0.75rem;
        }

        .reader-content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background: var(--light);
        }

        .chapter-text {
            max-width: 65ch;
            margin: 0 auto;
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--text);
        }

        .chapter-text p {
            margin-bottom: 1.5rem;
        }

        /* Payment Wall */
        .payment-wall {
            background: var(--light);
            border-radius: var(--radius);
            padding: 2.5rem;
            margin: 2rem auto;
            max-width: 500px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 2px solid #2d3748;
            color: var(--text);
        }

        .payment-icon {
            font-size: 3rem;
            color: var(--warning);
            margin-bottom: 1rem;
        }

        .payment-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 1rem;
        }

        .payment-description {
            color: var(--text-light);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .payment-features {
            text-align: left;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius);
        }

        .payment-features ul {
            list-style: none;
            padding: 0;
        }

        .payment-features li {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--text);
        }

        .payment-features i {
            color: var(--success);
        }

        .price-tag {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 1rem 0;
        }

        .price-note {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        /* PayPal Button Container */
        .paypal-container {
            margin: 1.5rem 0;
            min-height: 50px;
            display: flex;
            justify-content: center;
        }

        /* Ad Containers */
        .ad-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin: 2rem auto;
            text-align: center;
            color: white;
            box-shadow: var(--shadow-lg);
            max-width: 728px;
            position: relative;
            overflow: hidden;
        }

        .ad-container::before {
            content: "ADVERTISEMENT";
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0,0,0,0.3);
            color: rgba(255,255,255,0.7);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .ad-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .ad-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .ad-description {
            font-size: 0.9rem;
            opacity: 0.9;
            max-width: 500px;
        }

        .ad-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .ad-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .ad-image {
            width: 100%;
            max-width: 300px;
            height: 150px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .sidebar-ad {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            margin: 1rem;
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            color: #2d3748;
        }

        .sidebar-ad-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .sidebar-ad-content {
            font-size: 0.85rem;
            margin-bottom: 0.75rem;
        }

        .sidebar-ad-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .sidebar-ad-button:hover {
            background: var(--primary-dark);
        }

        .custume-bg {
          background-image: url('./assets/banner.png');
          background-position: right;
          background-repeat: no-repeat;
          background-size: cover;
        }

        /* Interactive Elements */
        .interactive-element {
            background: var(--light);
            border: 1px solid #2d3748;
            border-radius: var(--radius);
            padding: 1.25rem;
            margin: 1.5rem 0;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            color: var(--text);
        }

        .interactive-element:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent);
        }

        .reward-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-left: 1rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Floating Navigation Buttons */
        .floating-nav {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 80;
        }

        .floating-btn {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            border: none;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .floating-btn:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.4);
        }

        .floating-btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .floating-btn:disabled {
            background: #4a5568;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .floating-btn.next {
            background: var(--primary);
        }

        .floating-btn.prev {
            background: var(--secondary);
        }

        .floating-btn.menu {
            background: var(--accent);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: var(--light);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
            transform: translateX(400px);
            opacity: 0;
            transition: var(--transition);
            max-width: 350px;
            color: var(--text);
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .notification-success .notification-icon {
            background: var(--success);
        }

        .notification-warning .notification-icon {
            background: var(--warning);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .notification-message {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Sidebar Overlay for Mobile */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 95;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                transform: translateX(-100%);
                z-index: 99;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .app-container {
                height: calc(100dvh - 64px);
            }

            /* Ajuste dos bot√µes flutuantes para mobile */
            .floating-nav {
                bottom: 1.5rem;
                right: 1.5rem;
            }

            .floating-btn {
                width: 3.2rem;
                height: 3.2rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .app-header {
                padding: 1rem;
            }

            .logo span {
                display: none;
            }

            .reader-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .reader-actions {
                align-self: flex-end;
            }

            .reader-content {
                padding: 1rem;
            }

            .chapter-text {
                font-size: 1rem;
            }

            .payment-wall {
                padding: 1.5rem;
                margin: 1rem auto;
            }

            .ad-container {
                margin: 1.5rem auto;
                padding: 1.25rem;
            }

            .ad-title {
                font-size: 1.1rem;
            }

            .notification {
                left: 1rem;
                right: 1rem;
                max-width: none;
            }

            /* Bot√µes flutuantes mais compactos para mobile pequeno */
            .floating-nav {
                bottom: 1rem;
                right: 1rem;
                gap: 0.75rem;
            }

            .floating-btn {
                width: 3rem;
                height: 3rem;
            }

            /* No mobile, o bot√£o pr√≥ximo sempre fica habilitado */
            .floating-btn.next:disabled {
                opacity: 1;
                cursor: pointer;
                background: var(--primary);
            }
        }

        @media (max-width: 480px) {
            .chapter-title {
                font-size: 1.25rem;
            }

            .interactive-element {
                padding: 1rem;
            }

            .reward-badge {
                margin-left: 0.5rem;
                padding: 0.375rem 0.75rem;
            }

            .payment-wall {
                padding: 1rem;
                margin: 0.5rem auto;
            }

            .payment-title {
                font-size: 1.25rem;
            }

            .price-tag {
                font-size: 1.75rem;
            }

            .ad-container {
                padding: 1rem;
                margin: 1rem auto;
            }

            .ad-content {
                gap: 0.75rem;
            }

            .ad-image {
                height: 120px;
                max-width: 250px;
            }

            /* Bot√µes flutuantes ainda mais compactos */
            .floating-nav {
                bottom: 0.75rem;
                right: 0.75rem;
            }

            .floating-btn {
                width: 2.8rem;
                height: 2.8rem;
                font-size: 0.9rem;
            }
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .mt-1 {
            margin-top: 0.5rem;
        }

        .mt-2 {
            margin-top: 1rem;
        }

        .mb-1 {
            margin-bottom: 0.5rem;
        }

        .mb-2 {
            margin-bottom: 1rem;
        }

        .hidden {
            display: none;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="logo">
            <i class="fas fa-book-open"></i>
            <span>Forbidden Desires</span>
        </div>
        <div class="header-actions">
            <button class="icon-btn" id="themeToggle" aria-label="Toggle theme">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">Chapters</h2>
                <button class="icon-btn" id="closeSidebar" aria-label="Close sidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Sidebar Ad -->
            <div class="sidebar-ad">
                <div class="sidebar-ad-title">Unlock All Chapters</div>
                <div class="sidebar-ad-content">Get full access to the complete story</div>
                <button class="sidebar-ad-button" onclick="showPaymentWall()">$9.99</button>
            </div>
            
            <ul class="chapter-list" id="chapterList">
                <!-- Chapters will be populated by JavaScript -->
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="reader-header">
                <h1 class="chapter-title" id="currentChapterTitle">Chapter 1: The Unexpected Discovery</h1>
                <div class="reader-actions">
                    <button class="icon-btn" id="fontDecrease" aria-label="Decrease font size">
                        <i class="fas fa-font"></i>
                    </button>
                    <button class="icon-btn" id="fontIncrease" aria-label="Increase font size">
                        <i class="fas fa-text-height"></i>
                    </button>
                    <button class="icon-btn" id="bookmarkBtn" aria-label="Bookmark page">
                        <i class="far fa-bookmark"></i>
                    </button>
                </div>
            </div>

            <div class="reader-content" id="readerContent">
                <!-- Top Ad -->
                <!-- <div class="ad-container">
                    <div class="ad-content">
                        <div class="ad-image">
                            Your Ad Here
                        </div>
                        <div class="ad-title">Discover More Romance Novels</div>
                        <div class="ad-description">Explore our collection of steamy romance stories with exclusive content</div>
                        <button class="ad-button">Browse Now</button>
                    </div>
                </div> -->
                
                <div class="chapter-text" id="chapterText">
                    <!-- Chapter content will be populated by JavaScript -->
                </div>
                
                <!-- Payment Wall (hidden by default) -->
                <div class="payment-wall hidden" id="paymentWall">
                    <div class="payment-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h2 class="payment-title">Continue Reading</h2>
                    <p class="payment-description">
                        You've finished the free chapter! Unlock the full story to discover what happens next between Jenny and Nate.
                    </p>
                    
                    <div class="price-tag">$9.99</div>
                    <p class="price-note">One-time payment ‚Ä¢ Lifetime access</p>
                    
                    <div class="payment-features">
                        <ul>
                            <li><i class="fas fa-check"></i> Full access to all 5 chapters</li>
                            <li><i class="fas fa-check"></i> Exclusive bonus content</li>
                            <li><i class="fas fa-check"></i> No recurring charges</li>
                            <li><i class="fas fa-check"></i> Mobile & desktop access</li>
                        </ul>
                    </div>
                    
                    <!-- ‚úÖ Container para o bot√£o PayPal -->
                    <div class="paypal-container" id="paypalButtonContainer"></div>
                    
                    <!-- <p class="price-note">Secure payment ‚Ä¢ 30-day money-back guarantee</p> -->
                </div>
                
                <!-- Middle Ad -->
                <div class="ad-container custume-bg">
                    <div class="ad-content">
                        <div class="ad-title">If You Have More Than 18y... You're Ready for What Happens Next</div>
                        <div class="ad-description">Get access to exclusive content, early chapters, and connect with other readers</div>
                        <button class="ad-button" onclick="redirect()">Join to community</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Floating Navigation Buttons -->
    <div class="floating-nav">
        <button class="floating-btn prev" id="prevChapter" aria-label="Previous chapter">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="floating-btn menu" id="floatingMenu" aria-label="Open menu">
            <i class="fas fa-bars"></i>
        </button>
        <button class="floating-btn next" id="nextChapter" aria-label="Next chapter">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <!-- Notifications -->
    <div class="notification notification-success" id="achievementNotification">
        <div class="notification-icon">
            <i class="fas fa-trophy"></i>
        </div>
        <div class="notification-content">
            <div class="notification-title">Achievement Unlocked!</div>
            <div class="notification-message" id="achievementMessage">Curious Mind</div>
        </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <script>
        // ‚úÖ CONFIGURA√á√ÉO PAYPAL - SUAS CREDENCIAIS
        const PAYPAL_CONFIG = {
            clientId: "AWt1AnhU_rbAH8M56q6CUCfdCBQSNizvJyAt1dJ_5UmQYoQct5r_CIkkNXRH-fRLIOOFebcM5H9FK_Ym",
            currency: "USD"
        };

        // Ebook data
        const ebookData = {
            title: "Forbidden Desires",
            price: 9.99,
            chapters: [
                {
                    id: 1,
                    title: "The Unexpected Discovery",
                    content: `
                        <p>I always hated my stepfather. Nate was everything I didn't want in my life - an intruder trying to replace my father. I spent years making his life hell, determined to make him give up on us.</p>
                        
                        <p>Until that day I saw him coming out of the shower. The towel loosely tied around his waist, his muscular body dripping water... And that. My God, it was huge. My heart raced in a way I had never felt before.</p>
                        
                        <p>Suddenly, Nate was no longer the enemy. He was a man. An incredibly attractive man I couldn't get out of my head.</p>
                        
                        <div class="interactive-element" onclick="revealSecretThought()">
                            <p><strong>Click to reveal Jenny's secret thought:</strong> <span id="secretThought" style="display:none; color: var(--primary); font-weight:600;">I wonder what it would feel like to touch him...</span></p>
                        </div>
                    `,
                    duration: "5 min",
                    words: 450,
                    free: true
                },
                {
                    id: 2,
                    title: "The Camping Trip",
                    content: `
                        <p>When I heard about the camping trip, I saw my chance. Alone in the cabin, in the mountains... It would be perfect.</p>
                        
                        <p>"Can I go with you?" I asked, trying to disguise the anxiety in my voice.</p>
                        
                        <p>He was surprised. My mother was shocked. But I knew exactly what I was doing.</p>
                        
                        <p>The night in the cabin was colder than we expected. Shivering‚Äînot just from the cold‚ÄîI approached his bed.</p>
                        
                        <p>"I'm so cold," I whispered. "Can I sleep with you?"</p>
                        
                        <p>He hesitated. "We can't. I'm your stepfather."</p>
                        
                        <p>But I was already slipping under the covers, my hand finding his muscular back. He was tense, but he didn't push me away...</p>
                    `,
                    duration: "6 min",
                    words: 520,
                    free: false
                },
                {
                    id: 3,
                    title: "Crossing the Line",
                    content: `
                        <p>His skin was warm beneath my fingertips, and I could feel the hard muscles of his back tense under my touch. The room was silent except for our breathing - his shallow and controlled, mine coming in quick, nervous bursts.</p>
                        
                        <p>"Jenny," he whispered, his voice strained. "This isn't right."</p>
                        
                        <p>"Does it feel wrong?" I asked, my hand slowly moving lower, tracing the line of his spine.</p>
                        
                        <p>He didn't answer, but his body responded, a low groan escaping his lips as my fingers dipped below the waistband of his pajamas. The sound sent a jolt straight through me, awakening something primal and hungry.</p>
                        
                        <p>In that moment, all the rules disappeared. There was no stepfather, no stepdaughter - just a man and a woman giving in to a desire that had been building for years.</p>
                        
                        <div class="interactive-element" onclick="unlockAchievement('First Intimacy')">
                            <p><strong>Achievement Unlocked:</strong> First Intimate Moment <span class="reward-badge"><i class="fas fa-trophy"></i> +50 XP</span></p>
                        </div>
                    `,
                    duration: "7 min",
                    words: 580,
                    free: false
                },
                {
                    id: 4,
                    title: "The Morning After",
                    content: `
                        <p>Sunlight streamed through the cabin windows, illuminating the dust particles dancing in the air. I woke up wrapped in Nate's arms, his body warm against mine. For a moment, everything felt perfect.</p>
                        
                        <p>Then reality set in.</p>
                        
                        <p>He was already awake, watching me with an unreadable expression. "We can't tell your mother," he said quietly.</p>
                        
                        <p>"I know," I replied, my heart sinking slightly. "But this wasn't a mistake, Nate."</p>
                        
                        <p>He sighed, running a hand through his messy hair. "I'm twice your age, Jenny. I'm supposed to be the responsible one."</p>
                        
                        <p>"I'm eighteen," I countered. "Old enough to know what I want."</p>
                        
                        <p>And what I wanted was him. Last night had only confirmed that.</p>
                    `,
                    duration: "5 min",
                    words: 460,
                    free: false
                },
                {
                    id: 5,
                    title: "Secret Meetings",
                    content: `
                        <p>Over the next few weeks, we found ways to be alone together. Quick encounters when my mother was out, whispered conversations that carried double meanings when she was nearby.</p>
                        
                        <p>The secrecy only heightened the intensity. Every touch felt electric, every glance loaded with meaning.</p>
                        
                        <p>One afternoon, while my mother was at a friend's house, Nate cornered me in the kitchen. "This has to stop," he said, but his eyes told a different story.</p>
                        
                        <p>"Do you really want it to stop?" I challenged, stepping closer.</p>
                        
                        <p>He didn't answer with words. Instead, his mouth crashed against mine in a kiss that was all hunger and desperation. My back pressed against the refrigerator as his hands roamed my body, rediscovering curves he already knew by heart.</p>
                        
                        <div class="interactive-element" onclick="unlockAchievement('Risk Taker')">
                            <p><strong>Achievement Unlocked:</strong> Risky Encounter <span class="reward-badge"><i class="fas fa-trophy"></i> +75 XP</span></p>
                        </div>
                        
                        <p>In that moment, surrounded by the ordinary trappings of our kitchen, we crossed another line - one that would be even harder to come back from.</p>
                    `,
                    duration: "6 min",
                    words: 510,
                    free: false
                }
            ]
        };

        function redirect() {
          window.location.href = "./pages/premium.html";
        }

        // App State
        let currentState = {
            currentChapter: 1,
            fontSize: 1,
            wordsRead: 0,
            timeReading: 0,
            achievements: [],
            bookmarks: [],
            hasPurchased: false,
            darkMode: false,
            readingStartTime: Date.now()
        };

        // DOM Elements
        const elements = {
            sidebar: document.getElementById('sidebar'),
            closeSidebar: document.getElementById('closeSidebar'),
            sidebarOverlay: document.getElementById('sidebarOverlay'),
            chapterList: document.getElementById('chapterList'),
            currentChapterTitle: document.getElementById('currentChapterTitle'),
            chapterText: document.getElementById('chapterText'),
            paymentWall: document.getElementById('paymentWall'),
            paypalButtonContainer: document.getElementById('paypalButtonContainer'),
            prevChapter: document.getElementById('prevChapter'),
            nextChapter: document.getElementById('nextChapter'),
            floatingMenu: document.getElementById('floatingMenu'),
            themeToggle: document.getElementById('themeToggle'),
            fontDecrease: document.getElementById('fontDecrease'),
            fontIncrease: document.getElementById('fontIncrease'),
            bookmarkBtn: document.getElementById('bookmarkBtn'),
            achievementNotification: document.getElementById('achievementNotification'),
            achievementMessage: document.getElementById('achievementMessage')
        };

        // ‚úÖ FUN√á√ÉO PRINCIPAL DO PAYPAL
        function initializePayPal() {
            if (typeof paypal === 'undefined') {
                console.error('PayPal SDK n√£o carregou');
                showNotification('Erro ao carregar PayPal. Recarregue a p√°gina.', 'warning');
                return;
            }

            paypal.Buttons({
                style: {
                    layout: 'vertical',
                    color: 'gold',
                    shape: 'pill',
                    label: 'paypal'
                },
                
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: '9.99',
                                currency_code: 'USD'
                            },
                            description: 'Forbidden Desires - Full Ebook Access'
                        }],
                        application_context: {
                            shipping_preference: 'NO_SHIPPING'
                        }
                    });
                },

                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        console.log('‚úÖ Payment completed:', details);
                        
                        // ‚úÖ LIBERAR ACESSO AO EBOOK
                        currentState.hasPurchased = true;
                        localStorage.setItem('ebookPurchased', 'true');
                        
                        showNotification('üéâ Pagamento aprovado! Acesso completo liberado.', 'success');
                        
                        // Atualizar interface
                        renderChapterList();
                        
                        // Carregar pr√≥ximo cap√≠tulo ou manter o atual
                        if (currentState.currentChapter === 1) {
                            loadChapter(2); // Vai para o cap√≠tulo 2
                        } else {
                            loadChapter(currentState.currentChapter); // Recarrega o atual
                        }
                    });
                },

                onError: function(err) {
                    console.error('‚ùå PayPal Error:', err);
                    showNotification('‚ùå Erro no pagamento. Tente novamente.', 'warning');
                },

                onCancel: function(data) {
                    showNotification('‚ö†Ô∏è Pagamento cancelado', 'warning');
                }
                
            }).render('#paypalButtonContainer').catch(err => {
                console.error('Erro ao renderizar PayPal:', err);
                showNotification('‚ùå Erro ao carregar PayPal. Recarregue a p√°gina.', 'warning');
            });
        }

        // Initialize the app
        function initApp() {
            // Load dark mode preference
            const darkModePreference = localStorage.getItem('darkMode');
            if (darkModePreference === 'true') {
                toggleDarkMode();
            }
            
            // Load purchase state
            const purchased = localStorage.getItem('ebookPurchased');
            if (purchased === 'true') {
                currentState.hasPurchased = true;
            }
            
            renderChapterList();
            loadChapter(1);
            setupEventListeners();
            checkMobileView();
            updateNavigationButtons();
            
            // ‚úÖ INICIALIZAR PAYPAL
            setTimeout(() => {
                initializePayPal();
            }, 1000);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            currentState.darkMode = !currentState.darkMode;
            document.body.classList.toggle('dark-mode', currentState.darkMode);
            localStorage.setItem('darkMode', currentState.darkMode);
            
            // Update theme toggle icon
            const icon = elements.themeToggle.querySelector('i');
            if (currentState.darkMode) {
                icon.className = 'fas fa-sun';
            } else {
                icon.className = 'fas fa-moon';
            }
        }

        // Render chapter list in sidebar
        function renderChapterList() {
            elements.chapterList.innerHTML = '';
            
            ebookData.chapters.forEach(chapter => {
                const chapterItem = document.createElement('li');
                const isLocked = !chapter.free && !currentState.hasPurchased;
                const isActive = chapter.id === currentState.currentChapter;
                
                chapterItem.className = `chapter-item ${isActive ? 'active' : ''} ${isLocked ? 'locked' : ''}`;
                chapterItem.innerHTML = `
                    <div class="chapter-number">${chapter.id}</div>
                    <div class="chapter-name">${chapter.title}</div>
                    <div class="chapter-duration">${chapter.duration}</div>
                    ${isLocked ? '<i class="fas fa-lock lock-icon"></i>' : ''}
                `;
                
                chapterItem.addEventListener('click', () => {
                    if (!isLocked) {
                        loadChapter(chapter.id);
                        closeSidebar();
                    } else {
                        showPaymentWall();
                    }
                });
                
                elements.chapterList.appendChild(chapterItem);
            });
        }

        // Load a specific chapter
        function loadChapter(chapterId) {
            const chapter = ebookData.chapters.find(c => c.id === chapterId);
            if (!chapter) return;
            
            // Check if chapter is locked
            if (!chapter.free && !currentState.hasPurchased) {
                showPaymentWall();
                return;
            }
            
            currentState.currentChapter = chapterId;
            elements.currentChapterTitle.textContent = `Chapter ${chapterId}: ${chapter.title}`;
            elements.chapterText.innerHTML = chapter.content;
            
            // Hide payment wall and show chapter content
            elements.paymentWall.classList.add('hidden');
            elements.chapterText.classList.remove('hidden');
            
            // Update active chapter in sidebar
            document.querySelectorAll('.chapter-item').forEach(item => {
                item.classList.remove('active');
            });
            const activeItem = document.querySelector(`.chapter-item:nth-child(${chapterId})`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
            
            // Update words read
            currentState.wordsRead += chapter.words;
            
            // Update navigation buttons state
            updateNavigationButtons();
            
            // Scroll to top
            document.querySelector('.reader-content').scrollTop = 0;
        }

        // Show payment wall
        function showPaymentWall() {
            elements.paymentWall.classList.remove('hidden');
            elements.chapterText.classList.add('hidden');
            elements.currentChapterTitle.textContent = "Unlock Full Story";
            
            // Scroll to payment wall
            elements.paymentWall.scrollIntoView({ behavior: 'smooth' });
        }

        // Update navigation buttons state
        function updateNavigationButtons() {
            const isFirstChapter = currentState.currentChapter === 1;
            const isLastChapter = currentState.currentChapter === ebookData.chapters.length;
            const nextChapter = ebookData.chapters.find(c => c.id === currentState.currentChapter + 1);
            const isNextChapterLocked = nextChapter && !nextChapter.free && !currentState.hasPurchased;
            
            elements.prevChapter.disabled = isFirstChapter;
            
            // No mobile, o bot√£o pr√≥ximo sempre fica habilitado
            if (window.innerWidth <= 768) {
                elements.nextChapter.disabled = false;
            } else {
                elements.nextChapter.disabled = isLastChapter || isNextChapterLocked;
            }
            
            // Visual feedback para desktop
            if (window.innerWidth > 768) {
                elements.nextChapter.style.opacity = (isLastChapter || isNextChapterLocked) ? '0.5' : '1';
                elements.nextChapter.style.cursor = (isLastChapter || isNextChapterLocked) ? 'not-allowed' : 'pointer';
            } else {
                // No mobile, sempre vis√≠vel
                elements.nextChapter.style.opacity = '1';
                elements.nextChapter.style.cursor = 'pointer';
            }
            
            elements.prevChapter.style.opacity = isFirstChapter ? '0.5' : '1';
            elements.prevChapter.style.cursor = isFirstChapter ? 'not-allowed' : 'pointer';
        }

        // Navigate to previous chapter
        function previousChapter() {
            if (currentState.currentChapter > 1) {
                loadChapter(currentState.currentChapter - 1);
            }
        }

        // Navigate to next chapter
        function nextChapter() {
            if (currentState.currentChapter < ebookData.chapters.length) {
                const nextChapter = ebookData.chapters.find(c => c.id === currentState.currentChapter + 1);
                if (nextChapter && (!nextChapter.free && !currentState.hasPurchased)) {
                    showPaymentWall();
                } else {
                    loadChapter(currentState.currentChapter + 1);
                }
            }
        }

        // Show notification
        function showNotification(message, type = "success") {
            elements.achievementMessage.textContent = message;
            elements.achievementNotification.className = `notification notification-${type} show`;
            
            setTimeout(() => {
                elements.achievementNotification.classList.remove('show');
            }, 4000);
        }

        // Unlock achievement
        function unlockAchievement(achievementName) {
            if (currentState.achievements.includes(achievementName)) return;
            
            currentState.achievements.push(achievementName);
            showNotification(`Achievement Unlocked: ${achievementName}`, "success");
            
            // Special effects for certain achievements
            if (achievementName === 'Risk Taker') {
                confettiEffect();
            }
        }

        // Confetti effect
        function confettiEffect() {
            const colors = ['#e94560', '#ff6b95', '#48bb78', '#4299e1', '#ed8936'];
            const container = document.querySelector('.reader-content');
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'absolute';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = '50%';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-20px';
                confetti.style.opacity = '0.8';
                confetti.style.zIndex = '1000';
                container.appendChild(confetti);
                
                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 2000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // Reveal secret thought (interactive element)
        function revealSecretThought() {
            document.getElementById('secretThought').style.display = 'inline';
            unlockAchievement('Curious Mind');
            
            const element = document.querySelector('.interactive-element');
            element.style.transform = 'scale(1.02)';
            element.style.boxShadow = '0 8px 20px rgba(233, 69, 96, 0.3)';
            
            setTimeout(() => {
                element.style.transform = '';
                element.style.boxShadow = '';
            }, 500);
        }

        // Sidebar functions
        function openSidebar() {
            elements.sidebar.classList.add('active');
            elements.sidebarOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeSidebar() {
            elements.sidebar.classList.remove('active');
            elements.sidebarOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Check if mobile view
        function checkMobileView() {
            if (window.innerWidth <= 1024) {
                closeSidebar();
            }
            updateNavigationButtons();
        }

        // Setup event listeners
        function setupEventListeners() {
            elements.floatingMenu.addEventListener('click', openSidebar);
            elements.closeSidebar.addEventListener('click', closeSidebar);
            elements.sidebarOverlay.addEventListener('click', closeSidebar);
            
            elements.themeToggle.addEventListener('click', toggleDarkMode);
            
            elements.prevChapter.addEventListener('click', previousChapter);
            elements.nextChapter.addEventListener('click', nextChapter);
            
            elements.fontDecrease.addEventListener('click', () => {
                if (currentState.fontSize > 0.8) {
                    currentState.fontSize -= 0.1;
                    elements.chapterText.style.fontSize = `${currentState.fontSize}rem`;
                }
            });
            
            elements.fontIncrease.addEventListener('click', () => {
                if (currentState.fontSize < 1.5) {
                    currentState.fontSize += 0.1;
                    elements.chapterText.style.fontSize = `${currentState.fontSize}rem`;
                }
            });
            
            elements.bookmarkBtn.addEventListener('click', () => {
                const chapter = currentState.currentChapter;
                if (!currentState.bookmarks.includes(chapter)) {
                    currentState.bookmarks.push(chapter);
                    elements.bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
                    showNotification('Chapter bookmarked!', 'success');
                } else {
                    currentState.bookmarks = currentState.bookmarks.filter(b => b !== chapter);
                    elements.bookmarkBtn.innerHTML = '<i class="far fa-bookmark"></i>';
                    showNotification('Bookmark removed', 'warning');
                }
            });
            
            window.addEventListener('resize', checkMobileView);
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    previousChapter();
                } else if (e.key === 'ArrowRight') {
                    nextChapter();
                }
            });
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>